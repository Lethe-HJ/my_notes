# 性能测试

以下所有测试都在4VCPUS / 8G 虚拟机上进行的测试

## 计算性能测试(unixbench)

./Run -c 1 -c 4

------------------------------------------------------------------------
Benchmark Run: 四 4月 16 2020 12:46:13 - 13:14:24
4 CPUs in system; running 1 parallel copy of tests

Dhrystone 2 using register variables       28848540.0 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                     4338.6 MWIPS (9.8 s, 7 samples)
Execl Throughput                               2868.9 lps   (29.9 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks        354985.8 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks           90639.0 KBps  (30.0 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks       1238125.0 KBps  (30.0 s, 2 samples)
Pipe Throughput                              447226.6 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                 112478.8 lps   (10.0 s, 7 samples)
Process Creation                               9195.9 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                   5217.8 lpm   (60.0 s, 2 samples)
Shell Scripts (8 concurrent)                   1669.7 lpm   (60.0 s, 2 samples)
System Call Overhead                         318152.6 lps   (10.0 s, 7 samples)

System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   28848540.0   2472.0
Double-Precision Whetstone                       55.0       4338.6    788.8
Execl Throughput                                 43.0       2868.9    667.2
File Copy 1024 bufsize 2000 maxblocks          3960.0     354985.8    896.4
File Copy 256 bufsize 500 maxblocks            1655.0      90639.0    547.7
File Copy 4096 bufsize 8000 maxblocks          5800.0    1238125.0   2134.7
Pipe Throughput                               12440.0     447226.6    359.5
Pipe-based Context Switching                   4000.0     112478.8    281.2
Process Creation                                126.0       9195.9    729.8
Shell Scripts (1 concurrent)                     42.4       5217.8   1230.6
Shell Scripts (8 concurrent)                      6.0       1669.7   2782.9
System Call Overhead                          15000.0     318152.6    212.1
                                                                   ========
System Benchmarks Index Score                                         804.1

------------------------------------------------------------------------
Benchmark Run: 四 4月 16 2020 13:14:24 - 13:42:49
4 CPUs in system; running 4 parallel copies of tests

Dhrystone 2 using register variables       89422678.9 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                    15929.9 MWIPS (9.9 s, 7 samples)
Execl Throughput                               8338.2 lps   (29.9 s, 2 samples)
File Copy 1024 bufsize 2000 maxblocks        859711.0 KBps  (30.0 s, 2 samples)
File Copy 256 bufsize 500 maxblocks          224981.3 KBps  (30.0 s, 2 samples)
File Copy 4096 bufsize 8000 maxblocks       2831550.6 KBps  (30.0 s, 2 samples)
Pipe Throughput                             1551682.1 lps   (10.0 s, 7 samples)
Pipe-based Context Switching                 344945.0 lps   (10.0 s, 7 samples)
Process Creation                              26217.5 lps   (30.0 s, 2 samples)
Shell Scripts (1 concurrent)                  12172.0 lpm   (60.0 s, 2 samples)
Shell Scripts (8 concurrent)                   1967.7 lpm   (60.0 s, 2 samples)
System Call Overhead                        1061526.3 lps   (10.0 s, 7 samples)

System Benchmarks Index Values               BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   89422678.9   7662.6
Double-Precision Whetstone                       55.0      15929.9   2896.3
Execl Throughput                                 43.0       8338.2   1939.1
File Copy 1024 bufsize 2000 maxblocks          3960.0     859711.0   2171.0
File Copy 256 bufsize 500 maxblocks            1655.0     224981.3   1359.4
File Copy 4096 bufsize 8000 maxblocks          5800.0    2831550.6   4882.0
Pipe Throughput                               12440.0    1551682.1   1247.3
Pipe-based Context Switching                   4000.0     344945.0    862.4
Process Creation                                126.0      26217.5   2080.8
Shell Scripts (1 concurrent)                     42.4      12172.0   2870.8
Shell Scripts (8 concurrent)                      6.0       1967.7   3279.5
System Call Overhead                          15000.0    1061526.3    707.7
                                                                   ========
System Benchmarks Index Score                                        2140.4



## 存储性能测试

下载fio
http://freshmeat.sourceforge.net/projects/fio/
http://freshmeat.sourceforge.net/urls/3aa21b8c106cab742bf1f20d60629e3f

参考资料
https://www.cnblogs.com/zero-gg/p/9296603.html

`./configure`

`make`

`make install`

挂载云硬盘100G

`fdisk -l`



快速格式化
`mkfs.ext4 /dev/sdb`

[root@test1 /]# df -h
文件系统            容量  已用  可用 已用% 挂载点
/dev/rbd0           9.1G  5.5G  3.2G   64% /
none                492K  8.0K  484K    2% /dev
devtmpfs             63G     0   63G    0% /dev/fuse
tmpfs               100K     0  100K    0% /dev/lxd
/dev/mapper/os-var  449G  111G  316G   26% /dev/sdb
tmpfs               100K     0  100K    0% /dev/.lxd-mounts
none                 10M     0   10M    0% /sys/fs/cgroup
tmpfs                63G     0   63G    0% /dev/shm
tmpfs                63G  8.7M   63G    1% /run
tmpfs               782M   28K  782M    1% /run/user/0
/dev/sdb             99G   61M   94G    1% /mnt


100%随机，100%读， 4K

[root@test1 /]# `fio -filename=/dev/sdb -direct=1 -iodepth 1 -thread -rw=randread -ioengine=psync -bs=4k -size=80G -numjobs=50 -runtime=180 -group_reporting -name=rand_100read_4k`
rand_100read_4k: (g=0): rw=randread, bs=4K-4K/4K-4K/4K-4K, ioengine=psync, iodepth=1
...
fio-2.1.10
Starting 50 threads
Jobs: 50 (f=50): [rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr] [100.0% done] [13424KB/0KB/0KB /s] [3356/0/0 iops] [eta 00m:00s]
rand_100read_4k: (groupid=0, jobs=50): err= 0: pid=4458: Thu Apr 16 15:53:50 2020
  read : io=2254.9MB, bw=12824KB/s, iops=3206, runt=180047msec
    clat (usec): min=135, max=236220, avg=15590.02, stdev=13288.06
     lat (usec): min=135, max=236221, avg=15590.14, stdev=13288.06
    clat percentiles (usec):
     |  1.00th=[  346],  5.00th=[ 3088], 10.00th=[ 4384], 20.00th=[ 6432],
     | 30.00th=[ 8096], 40.00th=[ 9664], 50.00th=[11456], 60.00th=[14016],
     | 70.00th=[17536], 80.00th=[22400], 90.00th=[31616], 95.00th=[41216],
     | 99.00th=[66048], 99.50th=[77312], 99.90th=[105984], 99.95th=[118272],
     | 99.99th=[152576]
    bw (KB  /s): min=   98, max=  412, per=2.00%, avg=256.51, stdev=38.91
    lat (usec) : 250=0.58%, 500=0.75%, 750=0.05%, 1000=0.02%
    lat (msec) : 2=0.73%, 4=6.17%, 10=34.21%, 20=33.19%, 50=21.52%
    lat (msec) : 100=2.64%, 250=0.14%
  cpu          : usr=0.02%, sys=0.08%, ctx=577444, majf=0, minf=62
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued    : total=r=577243/w=0/d=0, short=r=0/w=0/d=0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: io=2254.9MB, aggrb=12824KB/s, minb=12824KB/s, maxb=12824KB/s, mint=180047msec, maxt=180047msec

Disk stats (read/write):
  rbd6: ios=576899/0, merge=0/0, ticks=8986058/0, in_queue=8988198, util=100.00%


100%随机，100%写， 4K
[root@test1 /]# `fio -filename=/dev/sdb -direct=1 -iodepth 1 -thread -rw=randwrite -ioengine=psync -bs=4k -size=80G -numjobs=50 -runtime=180 -group_reporting -name=rand_100write_4k`
rand_100write_4k: (g=0): rw=randwrite, bs=4K-4K/4K-4K/4K-4K, ioengine=psync, iodepth=1
...
fio-2.1.10
Starting 50 threads
Jobs: 50 (f=50): [wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww] [0.1% done] [0KB/11284KB/0KB /s] [0/2821/0 iops] [eta 04d:00h:09m:15s]
rand_100write_4k: (groupid=0, jobs=50): err= 0: pid=4372: Thu Apr 16 15:41:29 2020
  write: io=2202.2MB, bw=12528KB/s, iops=3131, runt=180065msec
    clat (usec): min=517, max=498495, avg=15957.77, stdev=47717.97
     lat (usec): min=517, max=498495, avg=15957.97, stdev=47717.97
    clat percentiles (usec):
     |  1.00th=[  628],  5.00th=[  684], 10.00th=[  748], 20.00th=[  860],
     | 30.00th=[  988], 40.00th=[ 1288], 50.00th=[ 2192], 60.00th=[ 3344],
     | 70.00th=[ 5280], 80.00th=[10688], 90.00th=[23680], 95.00th=[81408],
     | 99.00th=[272384], 99.50th=[313344], 99.90th=[378880], 99.95th=[395264],
     | 99.99th=[440320]
    bw (KB  /s): min=   15, max=  884, per=2.04%, avg=255.54, stdev=121.47
    lat (usec) : 750=10.31%, 1000=20.37%
    lat (msec) : 2=17.44%, 4=17.15%, 10=13.73%, 20=9.74%, 50=4.27%
    lat (msec) : 100=2.74%, 250=2.80%, 500=1.44%
  cpu          : usr=0.02%, sys=0.08%, ctx=564439, majf=0, minf=9
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued    : total=r=0/w=563963/d=0, short=r=0/w=0/d=0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: io=2202.2MB, aggrb=12527KB/s, minb=12527KB/s, maxb=12527KB/s, mint=180065msec, maxt=180065msec

Disk stats (read/write):
  rbd6: ios=0/563769, merge=0/0, ticks=0/8967944, in_queue=8979712, util=100.00%


100%顺序，100%读 ，4K

[root@test1 /]# `fio -filename=/dev/sdb -direct=1 -iodepth 1 -thread -rw=read -ioengine=psync -bs=4k -size=80G -numjobs=50 -runtime=180 -group_reporting -name=sqe_100read_4k`
sqe_100read_4k: (g=0): rw=read, bs=4K-4K/4K-4K/4K-4K, ioengine=psync, iodepth=1
...
fio-2.1.10
Starting 50 threads
Jobs: 1 (f=1): [_E___________EE_E________E___E______R_________E___] [2.3% done] [261.7MB/0KB/0KB /s] [66.1K/0/0 iops] [eta 02h:06m:00s]
sqe_100read_4k: (groupid=0, jobs=50): err= 0: pid=4256: Thu Apr 16 15:32:33 2020
  read : io=37319MB, bw=212298KB/s, iops=53074, runt=180003msec
    clat (usec): min=105, max=69305, avg=921.45, stdev=949.89
     lat (usec): min=105, max=69305, avg=921.54, stdev=949.90
    clat percentiles (usec):
     |  1.00th=[  124],  5.00th=[  143], 10.00th=[  165], 20.00th=[  215],
     | 30.00th=[  270], 40.00th=[  354], 50.00th=[  516], 60.00th=[  708],
     | 70.00th=[ 1128], 80.00th=[ 1656], 90.00th=[ 2320], 95.00th=[ 2864],
     | 99.00th=[ 3792], 99.50th=[ 4128], 99.90th=[ 5024], 99.95th=[ 5728],
     | 99.99th=[14272]
    bw (KB  /s): min=    1, max=28656, per=2.04%, avg=4326.40, stdev=3966.61
    lat (usec) : 250=26.41%, 500=22.52%, 750=12.44%, 1000=6.28%
    lat (msec) : 2=18.29%, 4=13.40%, 10=0.64%, 20=0.02%, 50=0.01%
    lat (msec) : 100=0.01%
  cpu          : usr=0.19%, sys=1.16%, ctx=9555851, majf=0, minf=1388
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued    : total=r=9553586/w=0/d=0, short=r=0/w=0/d=0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: io=37319MB, aggrb=212298KB/s, minb=212298KB/s, maxb=212298KB/s, mint=180003msec, maxt=180003msec

Disk stats (read/write):
  rbd6: ios=9552514/0, merge=633/0, ticks=8578008/0, in_queue=8605308, util=98.04%


100%顺序，100%写 ，4K

[root@test1 /]# `fio -filename=/dev/sdb -direct=1 -iodepth 1 -thread -rw=write -ioengine=psync -bs=4k -size=80G -numjobs=50 -runtime=180 -group_reporting -name=sqe_100write_4k`
sqe_100write_4k: (g=0): rw=write, bs=4K-4K/4K-4K/4K-4K, ioengine=psync, iodepth=1
...
fio-2.1.10
Starting 50 threads
Jobs: 42 (f=42): [WWWWWWWWEWWWWWWEWWWWWWWWWWWWWEEWWWWEWWWEWWWEWEWWWW] [0.1% done] [0KB/71840KB/0KB /s] [0/17.1K/0 iops] [eta 02d:11h:58m:41s]
sqe_100write_4k: (groupid=0, jobs=50): err= 0: pid=4555: Thu Apr 16 15:59:43 2020
  write: io=7874.5MB, bw=44791KB/s, iops=11197, runt=180023msec
    clat (usec): min=441, max=521143, avg=4463.68, stdev=9644.85
     lat (usec): min=441, max=521143, avg=4463.87, stdev=9644.84
    clat percentiles (usec):
     |  1.00th=[  506],  5.00th=[  548], 10.00th=[  596], 20.00th=[  716],
     | 30.00th=[  804], 40.00th=[  892], 50.00th=[ 1012], 60.00th=[ 1320],
     | 70.00th=[ 3088], 80.00th=[ 5792], 90.00th=[14272], 95.00th=[20352],
     | 99.00th=[39168], 99.50th=[49408], 99.90th=[80384], 99.95th=[110080],
     | 99.99th=[387072]
    bw (KB  /s): min=   22, max= 6330, per=2.02%, avg=904.18, stdev=1065.47
    lat (usec) : 500=0.72%, 750=22.39%, 1000=26.11%
    lat (msec) : 2=15.80%, 4=8.63%, 10=14.32%, 20=6.79%, 50=4.75%
    lat (msec) : 100=0.43%, 250=0.05%, 500=0.01%, 750=0.01%
  cpu          : usr=0.06%, sys=0.27%, ctx=2017644, majf=0, minf=507
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued    : total=r=0/w=2015845/d=0, short=r=0/w=0/d=0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: io=7874.5MB, aggrb=44790KB/s, minb=44790KB/s, maxb=44790KB/s, mint=180023msec, maxt=180023msec

Disk stats (read/write):
  rbd6: ios=0/2014846, merge=0/578, ticks=0/8929885, in_queue=8935652, util=100.00%


100%随机，70%读，30%写 4K

[root@test1 /]# `fio -filename=/dev/sdb -direct=1 -iodepth 1 -thread -rw=randrw -rwmixread=70 -ioengine=psync -bs=4k -size=80G -numjobs=50 -runtime=180 -group_reporting -name=randrw_70read_4k`
randrw_70read_4k: (g=0): rw=randrw, bs=4K-4K/4K-4K/4K-4K, ioengine=psync, iodepth=1
...
fio-2.1.10
Starting 50 threads
Jobs: 49 (f=49): [mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm_mmmmmmmmm] [50.1% done] [10524KB/4244KB/0KB /s] [2631/1061/0 iops] [eta 03m:00s] 
randrw_70read_4k: (groupid=0, jobs=50): err= 0: pid=4686: Thu Apr 16 16:07:51 2020
  read : io=2791.8MB, bw=15878KB/s, iops=3969, runt=180046msec
    clat (usec): min=125, max=677724, avg=7389.21, stdev=15273.13
     lat (usec): min=125, max=677724, avg=7389.33, stdev=15273.14
    clat percentiles (usec):
     |  1.00th=[  159],  5.00th=[  177], 10.00th=[  191], 20.00th=[  225],
     | 30.00th=[  298], 40.00th=[  378], 50.00th=[  478], 60.00th=[ 4384],
     | 70.00th=[ 8256], 80.00th=[12096], 90.00th=[20096], 95.00th=[30080],
     | 99.00th=[62208], 99.50th=[81408], 99.90th=[162816], 99.95th=[220160],
     | 99.99th=[423936]
    bw (KB  /s): min=    6, max= 1896, per=1.99%, avg=315.77, stdev=245.93
  write: io=1181.7MB, bw=6720.7KB/s, iops=1680, runt=180046msec
    clat (usec): min=552, max=671009, avg=12289.43, stdev=34362.86
     lat (usec): min=552, max=671010, avg=12289.63, stdev=34362.86
    clat percentiles (usec):
     |  1.00th=[  652],  5.00th=[  708], 10.00th=[  756], 20.00th=[  852],
     | 30.00th=[  996], 40.00th=[ 1560], 50.00th=[ 2736], 60.00th=[ 4048],
     | 70.00th=[ 7328], 80.00th=[12224], 90.00th=[24448], 95.00th=[52992],
     | 99.00th=[197632], 99.50th=[268288], 99.90th=[391168], 99.95th=[432128],
     | 99.99th=[485376]
    bw (KB  /s): min=    6, max=  772, per=1.98%, avg=133.22, stdev=106.26
    lat (usec) : 250=16.50%, 500=19.51%, 750=5.74%, 1000=6.60%
    lat (msec) : 2=4.35%, 4=6.72%, 10=16.03%, 20=13.85%, 50=7.94%
    lat (msec) : 100=1.99%, 250=0.56%, 500=0.20%, 750=0.01%
  cpu          : usr=0.04%, sys=0.14%, ctx=1017701, majf=0, minf=9
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued    : total=r=714674/w=302506/d=0, short=r=0/w=0/d=0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: io=2791.8MB, aggrb=15877KB/s, minb=15877KB/s, maxb=15877KB/s, mint=180046msec, maxt=180046msec
  WRITE: io=1181.7MB, aggrb=6720KB/s, minb=6720KB/s, maxb=6720KB/s, mint=180046msec, maxt=180046msec

Disk stats (read/write):
  rbd6: ios=714477/302421, merge=0/0, ticks=5263989/3707158, in_queue=8975231, util=100.00%


## 网络测试

### 1.TCP_STREAM：tcp 吞吐量测试

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60 -i 10,2 -I 99,5 -- -m 2K -s 128K -S 128K`
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

262144 262144   2048    60.00     939.45 


[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60 -i 10,2 -I 99,5 -- -m 2K -s 256K -S 256K`
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

524288 524288   2048    60.00     940.48 


[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60 -i 10,2 -I 99,5 -- -m 4K -s 128K -S 128K`
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

262144 262144   4096    60.00     939.39 

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60 -i 10,2 -I 99,5 -- -m 4K -s 256K -S 256K`
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

524288 524288   4096    60.00     940.11


### 2.TCP_RR：数据库应用测试

netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 2K -s 128K -S 128K -r 1024,32

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 2K -s 128K -S 128K -r 1024,32`
MIGRATED TCP REQUEST/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf.  : first burst 0
!!! WARNING
!!! Desired confidence was not achieved within the specified iterations.
!!! This implies that there was variability in the test environment that
!!! must be investigated before going further.
!!! Confidence intervals: Throughput      : 27.812%
!!!                       Local CPU util  : 0.000%
!!!                       Remote CPU util : 0.000%

Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

262144 262144 1024     32      60.00    9508.67   
262144 262144

netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 2K -s 256K -S 256K -r 1024,32

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 2K -s 256K -S 256K -r 1024,32`
MIGRATED TCP REQUEST/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf.  : first burst 0
!!! WARNING
!!! Desired confidence was not achieved within the specified iterations.
!!! This implies that there was variability in the test environment that
!!! must be investigated before going further.
!!! Confidence intervals: Throughput      : 18.954%
!!!                       Local CPU util  : 0.000%
!!!                       Remote CPU util : 0.000%

Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

524288 524288 1024     32      60.00    9875.76   
524288 524288


netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 4K -s 128K -S 128K -r 1024,128

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 4K -s 128K -S 128K -r 1024,128`
MIGRATED TCP REQUEST/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf.  : first burst 0
!!! WARNING
!!! Desired confidence was not achieved within the specified iterations.
!!! This implies that there was variability in the test environment that
!!! must be investigated before going further.
!!! Confidence intervals: Throughput      : 20.182%
!!!                       Local CPU util  : 0.000%
!!!                       Remote CPU util : 0.000%

Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

262144 262144 1024     128     60.00    9821.06   
262144 262144


netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 4K -s 256K -S 256K -r 1024,128

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60  -t TCP_RR -i 10,2 -I 99,5 -- -m 4K -s 256K -S 256K -r 1024,128`
MIGRATED TCP REQUEST/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf.  : first burst 0
Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

524288 524288 1024     128     60.00    10208.32   
524288 524288


### 3.TCP_CRR：http应用测试


netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 128K -S 128K -r 128,1024

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 128K -S 128K -r 128,1024`
MIGRATED TCP Connect/Request/Response TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

262144 262144 128      1024    60.00    3279.88   
262144 262144

netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 256K -S 256K -r 128,1024

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 256K -S 256K -r 128,1024`
MIGRATED TCP Connect/Request/Response TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

524288 524288 128      1024    60.00    3286.16   
524288 524288

netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 128K -S 128K -r 256,1024

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 128K -S 128K -r 256,1024`
MIGRATED TCP Connect/Request/Response TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

262144 262144 256      1024    60.00    3236.67   
262144 262144


netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 256K -S 256K -r 256,1024

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237  -t TCP_CRR -l 60 -i 10,2 -I 99,5 -- -m 4K -s 256K -S 256K -r 256,1024`
MIGRATED TCP Connect/Request/Response TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Local /Remote
Socket Size   Request  Resp.   Elapsed  Trans.
Send   Recv   Size     Size    Time     Rate         
bytes  Bytes  bytes    bytes   secs.    per sec   

524288 524288 256      1024    60.00    3242.82   
524288 524288

### 4.UDP_STREAM：ftp文件传输，udp吞吐量测试

netperf -H 192.168.83.237 -l 60 -t UDP_STREAM -i 10,2 -I 99,5 -- -m 1024 -M 1024 -s 128K -S 128K

[root@host-192-168-83-240 netperf-2.7.0]# `netperf -H 192.168.83.237 -l 60 -t UDP_STREAM -i 10,2 -I 99,5 -- -m 1024 -M 1024 -s 128K -S 128K`
MIGRATED UDP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.83.237 () port 0 AF_INET : +/-2.500% @ 99% conf. 
Socket  Message  Elapsed      Messages                
Size    Size     Time         Okay Errors   Throughput
bytes   bytes    secs            #      #   10^6bits/sec

262144    1024   60.00     6032183      0     823.59
262144           60.00     6030660            823.39

netperf -H 192.168.83.237 -l 60 -t UDP_STREAM -i 10,2 -I 99,5 -- -m 2048 -M 2048 -s 128K -S 128K
netperf -H 192.168.83.237 -l 60 -t UDP_STREAM -i 10,2 -I 99,5 -- -m 1024 -M 1024 -s 256K -S 256K
netperf -H 192.168.83.237 -l 60 -t UDP_STREAM -i 10,2 -I 99,5 -- -m 2048 -M 2048 -s 256K -S 256K


