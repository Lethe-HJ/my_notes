## 测试连通

编辑(或创建)/etc/ansible/hosts 并在其中加入一个或多个远程主机.你的public SSH key必须在这些系统的`authorized_keys`中:

`$ echo "192.168.7.153" >> /etc/ansible/hosts`
`$ echo "192.168.7.154" >> /etc/ansible/hosts`

如果你的ANSIBLE_HOSTS变量被修改了，试试将其改回来
`$ export ANSIBLE_HOSTS=/etc/ansible/hosts`

ping /etc/ansible/hosts文件里的全部主机
`$ ansible all -m ping`

ping /etc/ansible/hosts文件里的全部主机 指定登录用户
如果你想访问 sudo模式，也可以通过 --sudo,或者指定sudo 用户  --sudo --sudo-user root来访问
`ansible all -m ping -u root`
`ansible all -m ping -u root --sudo`
`ansible all -m ping -u root --sudo --sudo-user root`


假定你使用SSH Key来授权.为了避免在建立SSH连接时,重复输入密码你可以这么 做:

`$ ssh-agent bash`
`$ ssh-add ~/.ssh/id_rsa`

根据你的建立方式,你也许希望使用Ansible的 --private-key 选项,通过指定pem文件来代替SSH Key来授权

现在对你的所有节点运行一个命令:

`$ ansible all -a "/bin/echo hello"`


## 公钥认证

如果有个主机重新安装并在“known_hosts”中有了不同的key,这会提示一个错误信息直到被纠正为止.在使用Ansible时,你可能不想遇到这样的情况:如果有个主机没有在“known_hosts”中被初始化将会导致在交互使用Ansible或定时执行Ansible时对key信息的确认提示.

如果你想禁用此项行为并明白其含义,你能够通过编辑 /etc/ansible/ansible.cfg or ~/.ansible.cfg来实现:

    [defaults]
    host_key_checking = False

或者你也可以通过设置环境变量来实现:

`$ export ANSIBLE_HOST_KEY_CHECKING=False`

同样注意在paramiko 模式中 公钥认证 相当的慢.因此,当使用这项特性时,切换至’SSH’是推荐做法.

