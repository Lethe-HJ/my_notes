## 基本网络命令
`ifconfig eth0` ##查看eth0设备
`ifconfig eth0 172.25.254.65/24` ## 设置网卡eth0的ip地址以及子网掩码
`ifconfig eth0 down` ##关闭网卡eth0
`ifconfig eth0 up` ##开启网卡eth0
`ip addr` 或 `ifconfig ` ##检测或设定网络接口
`ip addr show eth0` ##检测设备eth0的网络接口
`ip addr add ip/24 dev eth0` ##设定eth0IP地址及子网掩码

## 网络配置文件

`/etc/sysconfig/netwrok-scripts/`网络配置目录

```shell
网络配置文件的命名规则

ifcfg-xxxx ##文件名称
DEVICE=xxx ##设备名称
BOOTPROTO=dhcp|static|none ##设备工作方式
ONBOOT=yes ##网络服务开启时自动激活网卡
IPADDR=xxx.xxx.xxx.xxx ##IP地址
PREFIX=24 ##子网掩码
NETMASK=255.255.255.0 ##子网掩码
NAME=xxx ##接口名称
```

示例：
```shell
DEVICE=eth0
ONBOOT=yes
IPADDR=172.25.254.115
NETMASK=255.255.255.0
BOOTPROTO=none
NAME=westos
```

设置完成之后`systemctl restart network `

一块网卡上配置多个IP
```shell
DEVICE=eth0
ONBOOT=yes
IPADDR0=172.25.254.115
NETMASK0=255.255.255.0
BOOTPROTO=none
NAME=westos
IPADDR1=172.25.0.115
NETMASK1=255.255.255.0 
```

## lo回环接口
主机内部服务之间沟通的网络接口
127.0.0.1—-localhost
0.0.0.0代表所有

## 网关

设定虚拟机网关
`vim /etc/sysconfig/network` ##全局网关，对所有没有设定网关的网卡生效 
写入`GATEWAY=172.25.254.15`

vim /etc/sysconfig/network-scripts/ifcfg-eth0
`GATEWAY=172.25.254.15` ##当网卡中设定的IP只有一个时
`GATEWAY0=172.25.254.15` ##当网卡中设定的IP有多个时，指定对于某个IP生效 

`route -n` ##查看网关

## 设定dns
domain name server 域名解析服务（解析就是把域名变成IP）
`vim /etc/hosts` ##本地解析文件 

`vim /etc/resolv.conf` ##dns的指向文件（临时）
写入`nameserver 114.114.114.114`##当需要某个域名的IP地址时去114.114.114.114获取

`vim /etc/sysconfig/network-scripts/ifcfg-xxx` （永久）
写入`DNS1=114.114.114.114`


关于网络的配置Tools
①ifconfig

    -a：查看启用和被禁用的网卡信息
    interface {up|down}：启用或禁用网卡
    interface IP/NETMASK：临时设置IP
    interface [-]promisc：设置网卡的工作在混杂模式
    -s interface：查看指定网卡的流量信息

②route

    -n：以数字方式显示，不解析，提高效率
    add {-net | -host} NETWORK/NETMASK gw GATEWAY dev DEVICE 添加路由
    {add | del} default gw GATEWAY 添加或删除默认路由
    del {-net | -host} NETWORK/NETMASK gw GATEWAY 删除路由

route add -net 10.0.0.0/8 gw 172.20.0.1 dev eth1 #添加一条到10.0.0.0网段的路由
route del -net 10.0.0.0/8 gw 172.20.0.1 #删除10.0.0.0网段的路由

③netstat

    -n：以数字方式显示，不解析，提高效率
    -r：查看路由表
    -t：TCP相关
    -u：UDP相关
    -w：裸套接字
    -l：查看处于监听状态的端口
    -a：查看所有状态的端口
    -e：显示更详细的信息
    -p：查看相关的进程PID
    -i：显示网卡流量
    -Iinterface：查看指定网卡的流量信息 == ifconfig -s interface

[root@centos7 ~]# netstat -tnulp  #显示TCP，UDP的监听状态及相关进程的端口    

④ip

    link
        set interface {up|down}：启用或禁用网卡
        show interface：显示指定网卡信息
    addr
        add IP/NETMASK [label interface:#] [scope {global | link | host}] [broadcast IP] dev interface：添加配置临时地址
            label：指定别名
            scope：作用域
                global：作用域为全局
                link：仅和此网卡相连的网络生效
                host：仅主机可用
            broadcast：设定广播地址
        del dev interface [label interface:#]：删除IP
        flush dev interface [label interface:#]：清空IP

    route
        add IP/NETMASK via GATEWAY dev interface：添加路由
        add default via GATEWAY dev interface：添加默认路由
        del IP/NETMASK via GATEWAY dev interface：删除路由
        flush：清空路由表
        show：查看路由表

[root@centos7 ~]# ip addr add 192.168.1.100/24 label eth0:0 dev eth0 #设置临时IP地址

 
⑤ss

    -n：以数字方式显示，不解析，提高效率
    -t：TCP相关
    -u：UDP相关
    -w：裸套接字
    -x：显示unix sock相关信息
    -l：查看处于监听状态的端口
    -a：查看所有状态的端口
    -e：显示更详细的信息
    -p：查看相关的进程PID
    -m：内存用量
    -o：计时器信息
    -s：显示当前socket详细信息
    state TCP_STATE '( dport = :ssh or sport = :ssh )'
        established
        listen
        fin_wait_1
        fin_wait_2
        syn_sent
        syn_recv

[root@centos7 ~]# ss state established '( dport = :ssh or sport = :ssh )' #查看已连接状态的ssh

 
⑥nmcli：地址配置工具（CentOS7.x）

子命令补全功能：yum install bash-completion ，依赖epel源

1、查看信息

[root@centos7 ~]# nmcli device status
[root@centos7 ~]# nmcli connection show

2、删除配置

[root@centos7 ~]# nmcli connection delete ens33

3、增加配置

[root@centos7 ~]# nmcli connection add con-name ens33 ifname ens33 type ethernet ipv4.method auto connection.autoconnect yes

    con-name ens33：配置文件名称
    ifname ens33：指定网卡设备
    type ethernet：网络类型以太网
    ipv4.method auto：自动获取IP
    connection.autoconnect yes：开机自启动

 4、切换配置

[root@centos7 ~]# nmcli connection up ens33

 5、修改配置文件名ens33 --> ens33-static

[root@centos7 ~]# nmcli connection modify ens33 con-name ens33-static

 6、修改配置IP

[root@centos7 ~]# nmcli connection modify ens33-static ipv4.addresses 192.168.0.100/24 ipv4.gateway 192.168.0.1 ipv4.method manual

    ipv4.addresses 192.168.0.100/24：IP地址
    ipv4.gateway 192.168.0.1：网关
    ipv4.method manual：手动获取，静态地址必须配置为手动，否则默认动态

7、重新读取配置文件

[root@centos7 ~]# nmcli connection reload

8、断开和连接网络连接

[root@centos7 ~]# nmcli device disconnect ens33
[root@centos7 ~]# nmcli device connect ens33

9、查看网络配置的详细信息

[root@centos7 ~]# nmcli connection show ens33

10、在配置中再添加一个地址

[root@centos7 ~]# nmcli connection modify ens33-static +ipv4.addresses 10.0.0.2/8

三：其他相关工具

ping：测试网络命令

    -c count：ping的次数
    -W timeout：超时时间，配合-c使用
    -I ipaddress：指定用自己主机的IP去ping对方主机
    -s size：每次ping发出的数据包大小，最大值65507
    -f：竭尽自己主机的能力发出数据包

[root@centos7 ~]# ping -c1 -W1 192.168.0.6 #脚本中常用的ping测试，ping一次，超时时间1s
[root@centos7 ~]# ping -s 65507 -f 192.168.0.6 #竭尽自己所能，向192.168.0.6发出大数据包，ddos攻击

tcpdump：抓包工具

    -n：禁止解析IP
    -i interface：指定网卡接口
    tcp|udp|icmp|arp：指定包协议

mtr：网络诊断工具

traceroute：跟踪路由

tracepath：跟踪路由

ifup：启用网卡

ifdown：禁用网卡

setup：字符界面配置工具（centos6.x）

system-config-network-tui：字符界面网络配置工具（centos6.x）

hostnamectl：设置主机名工具（centos7.x）

    status
    set-hostname HOSTNAME

mm-connection-editor：图形界面网络配置工具（centos7.x）

nmtui：字符界面配置工具（centos7.x）

    nmtui-connect
    nmtui-edit
    nmtui-hostname

lftp | lftp [-u user[,pass]] [-p port] [-e cmd] FTPSERVER：FTP客户端工具

    get
    mget
    put
    mput
    mirror DIR

lftpget URL：非交互式下载ftp服务器的文件

wget：网络下载工具

    -q：静默模式
    -c：断点续传
    -P /path/DIRNAME：下载的文件保存到指定文件夹
    -O /path/FILENAME：下载的文件保存到指定位置，并重命名
    --limit-rate=# K|M：限速至# K|M

elinks | links：字符界面web浏览器

    -source：查看网页源代码
    -dump：只显示文字


防火墙操作
firewall-cmd --zone=public --add-port=5672/tcp --permanent
firewall-cmd --reload

sudo systemctl stop firewalld 临时关闭

sudo systemctl disable firewalld ，然后reboot 永久关闭

sudo systemctl status  firewalld 查看防火墙状态。
