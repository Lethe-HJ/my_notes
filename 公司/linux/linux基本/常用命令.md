# 常用命令

## find

### 按文件名：

`$ find /etc -name "ifcfg-eth0"`在/etc目录下查找ifcfg-eth0
`$ find /etc -iname "ifcfg-eth0"`在/etc目录下查找ifcfg-eth0 忽略大小写

### 按文件大小：

`$ find /etc -size +5M`  //大于5M
`$ find /etc -size 5M`  //等于5M
`$ find /etc -size -5M`  //小于5M
`$ find /etc -size +5M -ls`  //-ls找到的处理动作

### 按时间找：

`$ # find /etc -mtime +5`  //修改时间超过5天
`$ # find /etc -mtime 5`  //修改时间等于5天
`$ # find /etc -mtime -5`  //修改时间5天以内

### 按文件属主、属组找：

`$ # find /home -user jack`  //属主是jack的文件
`$ # find /home -group hr`  //属组是hr组的文件

### 按文件类型：

`$ # find /dev -type f`  //f普通
`$ # find /dev -type d`  //d目录
`$ # find /dev -type l`  //l链接
`$ # find /dev -type b`  //b块设备
`$ # find /dev -type c`  //c字符设备
`$ # find /dev -type s`  //s套接字
`$ # find /dev -type p`  //p管道文件

### 按逻辑查找:
`$ find ./ -name '*.py' -and  -name '1*'`  //查找已py结尾并且已1开头的文件
`$ find / -name 'passwd' -or -name 'group'`  //查找名字包含passwd 或者 包含group的文件

### 按文件权限：

`$ find . -perm 644 -ls`

### 按正则表达式:

`$ find /etc  -regex  '.*ifcfg-eth[0-9]'`

### 找到后处理的动作
ACTIONS： （默认动作-print）
+ -print
+ -ls
+ -delete
+ -exec 后面跟自定义的shell命令
+ -ok 后面跟自定义的shell命令

`$ find /etc -name "ifcfg*" -ls`
`$ find /etc -name "ifcfg*" -exec cp -rvf {} /tmp \;`
`$ find /etc -name "ifcfg*" -ok cp -rvf {} /tmp \;`
`$ find /etc -name "ifcfg*" -exec rm -rf {} \;`
`$ find /etc -name "ifcfg*" -delete`

`$ find /var/tmp/etc/ -type d -exec chmod 777 {} \;`         //分号是找到一个设置一个权限
`$ find /var/tmp/etc/ -type d -exec chmod 777 {} \+`        //加号是统一找到后设置权限

## 文件过滤 grep

grep工具：行过滤

OPTIONS:
+ -i: 不区分大小写
+ -v: 查找不包含指定内容的行,反向选择
+ -w: 按单词搜索
+ -c: 统计匹配到的次数
+ -n: 显示行号
+ -r: 逐层遍历目录查找
+ -A: 显示匹配行及前面多少行
+ -B: 显示匹配行及后面多少行
+ -C: 显示匹配行前后多少行
+ --color=auto ：可以将找到的关键词部分加上颜色的显示
+ -l：只列出匹配的文件名
+ -L：列出不匹配的文件名
+ -e: 使用正则搜索
+ ^key:以什么开头
+ key$:以什么结尾


## 文件打包压缩 

### 打包压缩--tar

tar 建议针对目录，打包压缩多个文件，不会改变文件的属性和权限

选项：
+ -c         创建tar包
+ -f         指定包名
+ -v         显示详细信息
+ -z         使用gzip工具压缩
+ -j         使用bzip2工具压缩
+ -J         使用xz工具压缩
+ -t         查看tar包内容
+ -x         解压tar包
+ -C         指定解压路径
+ -r         追加文件到tar包

### 打包压缩--zip

zip兼容unix和windows，可以压缩多个文件或目录

压缩
zip [option] 压缩后的文件 需要压缩的文件（可以多个）

解压缩
unzip　　需要解压的文件
unzip -d path  需要解压的文件

选项
+ -A 自动解压文件
+ -c 给压缩文件加注释
+ -d 删除文件
+ -F 修复损坏文件
+ -k 兼容 DOS
+ -m 压缩完毕后，删除源文件
+ -q 运行时不显示信息处理信息
+ -r 处理指定目录和指定目录下的使用子目录
+ -v 显示信息的处理信息
+ -x “文件列表” 压缩时排除文件列表中指定的文件
+ -y 保留符号链接
+ -b<目录> 指定压缩到的目录
+ -i<格式> 匹配格式进行压缩
+ -L 显示版权信息
+ -t<日期> 指定压缩文件的日期
+ -<压缩率> 指定压缩率

将/boot、/etc目录下所有的文件压缩到/tmp目录里，叫20170718.zip
`$ zip -r /tmp/$(date +%Y%m%d).zip /boot /etc`

将20170718.zip文件解压到指定目录/backup里
`$ unzip /tmp/20170718.zip -d /backup`

向压缩文件中myfile.zip中添加rpm_info.txt文件
`$ zip -m myfile.zip ./rpm_info.txt`

多个文件或目录
`$ zip -r filename.zip file1 file2 file3 /usr/work/school`

-x  排除指定文件的运用；压缩当前文件所有内容，出了 images和upload目录下的所有文件
`$ zip -r back.zip ./* -x "./images/*" -x "./upload/*"`