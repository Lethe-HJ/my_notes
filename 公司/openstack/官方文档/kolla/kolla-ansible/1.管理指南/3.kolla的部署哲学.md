# kolla的部署哲学

## 概述

Kolla的目标是用灵活，无痛且廉价的部署过程代替OpenStack的僵化，痛苦，资源密集型部署过程。通常，为了在100多个节点的范围内部署OpenStack，小型企业可能需要构建一个OpenStack专业人员团队来维护和管理OpenStack部署. 找到在OpenStack部署方面有经验的人是非常困难和昂贵的，这为采用OpenStack设置了一个很大的障碍.Kolla试图通过简化部署过程，同时启用灵活的部署模型来解决这组问题。

Kolla是一个非常固执己见的开箱即用的部署工具。随着操作人员使用OpenStack的经验的增长，定制OpenStack服务的需求也在增长. Kolla提供了覆盖部署中的每个OpenStack服务配置选项的完整功能。

## 为什么不进行模板定制?

Kolla上游社区不希望将键/值对放在Ansible playbook配置选项中，这些选项对于获得功能性部署来说不是必需的。如果Kolla上游沿着模板配置选项的路径开始，Ansible配置可能会增长到数百个无法管理的配置键/值对。最后，为配置选项添加键/值对创建了这样一种情况，为了成功地添加新的自定义，需要开发和发布周期.配置选项中的模板本质上不是一个可伸缩的解决方案，并且会导致项目无法执行其任务。

## kolla定制的解决方案

与Kolla的Ansible playbook中处理模板配置选项的自定义疯狂不同，Kolla通过一个简单、整洁的设计：自定义配置单元来消除了现有部署工具的所有低效之处

在部署OpenStack服务的过程中，一组基本的默认配置选项会被自定义ini配置部分合并和覆盖。Kolla部署定制就是这么简单!这确实造成了这样一种情况，如果需要在OpenStack部署中进行定制，操作人员必须引用上游文档。幸运的是，配置选项文档是非常成熟和格式良好的。

例如，考虑在虚拟机中运行Kolla。为了在虚拟环境中从Nova启动虚拟机，需要使用QEMU管理程序，而不是KVM管理程序。要实现这个结果，只需mkdir -p /etc/kolla/config，然后修改文件/etc/kolla/config/nova.conf，内容如下:

    [libvirt]
    virt_type=qemu

在此更改之后，Kolla将使用性能较低的仿真虚拟机监控程序。Kolla可以对这个通常修改过的配置选项进行模板化。如果Kolla沿着这条路径开始，那么Kolla项目可能会以数百个配置选项结束，所有这些配置选项都必须经过主观评估，以确定是否包含在源代码树中。

Kolla的方法提供了一个解决方案，支持完全定制，而不需要任何上游维护负担。操作人员不必依赖于主观的配置选项批准过程，也不必依赖于开发/测试/发布周期来获得所需的定制。相反，操作员有最终的自由，可以立即做出所需的部署选择，而无需第三方的批准。